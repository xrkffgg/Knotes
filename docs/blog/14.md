# 14. tabindex ç”¨æ³•è¯´æ˜
## 1 å‰ è¨€
> `tabindex` æŒ‡ç¤ºå…¶å…ƒç´ æ˜¯å¦å¯ä»¥èšç„¦ï¼Œä»¥åŠå®ƒæ˜¯å¦/åœ¨ä½•å¤„å‚ä¸é¡ºåºé”®ç›˜å¯¼èˆªã€‚

æœ¬ç¯‡å°†ä»‹ç» `tabindex` çš„ä¸€äº›ç”¨æ³•ã€‚é€šå¸¸ä½¿ç”¨ `tab` é”®ç§»åŠ¨ç„¦ç‚¹ï¼Œä½¿ç”¨ç©ºæ ¼é”®æ¿€æ´»ç„¦ç‚¹ã€‚

## 2 è§„èŒƒ && å…¼å®¹
|||
|--|--|
|HTML 4|Only supported on `<a>ã€<area>ã€ <button>ã€ <object>ã€ <select>ã€ <textarea>`|
|HTML 5|All elements|

- å…¼å®¹ç›®å‰æ‰€æœ‰ **PCæµè§ˆå™¨** å’Œ **æ‰‹æœºæµè§ˆå™¨**

## 3 å®š ä¹‰
- `tabindex="-1"` ï¼šè¡¨ç¤ºå…ƒç´ æ˜¯å¯èšç„¦çš„ï¼Œä½†æ˜¯ä¸èƒ½é€šè¿‡ `tab` å¯¼èˆªæ¥è®¿é—®åˆ°è¯¥å…ƒç´ ï¼Œå¯ä»¥é€šè¿‡jsè·å–ã€‚
- `tabindex="0"` ï¼šè¡¨ç¤ºå…ƒç´ æ˜¯å¯èšç„¦çš„ï¼Œå¯ä»¥é€šè¿‡ `tab` å¯¼èˆªæ¥èšç„¦åˆ°è¯¥å…ƒç´ ï¼Œå®ƒçš„ç›¸å¯¹é¡ºåºæ˜¯å½“å‰å¤„äºçš„DOMç»“æ„æ¥å†³å®šçš„ã€‚è‹¥ä¸€ä¸ªå…ƒç´ æ²¡æœ‰è®¾ç½® `tabindex`ï¼Œé»˜è®¤å€¼ä¸º 0ã€‚
- `tabindex` å¤§äº 0 ï¼šè¡¨ç¤ºå…ƒç´ æ˜¯å¯èšç„¦çš„ï¼Œå¯ä»¥é€šè¿‡ `tab` å¯¼èˆªæ¥è®¿é—®åˆ°è¯¥å…ƒç´ ï¼›å®ƒçš„ç›¸å¯¹é¡ºåºæŒ‰ç…§ `tabindex` çš„æ•°å€¼é€’å¢è€Œæ»åè·ç„¦ï¼ˆå…ˆè·å–å€¼å°çš„ï¼‰ã€‚å¦‚æœå¤šä¸ªå…ƒç´ æ‹¥æœ‰ç›¸åŒçš„ `tabindex`ï¼Œå®ƒä»¬çš„ç›¸å¯¹é¡ºåºæŒ‰ç…§ä»–ä»¬åœ¨å½“å‰DOMä¸­çš„å…ˆåé¡ºåºå†³å®šã€‚

::: warning
æ³¨ï¼š`tabindex` çš„æœ€å¤§å€¼ä¸åº”è¶…è¿‡ 32767
:::

## 4 ä½¿ ç”¨
### 4.1 è·å–ç„¦ç‚¹ `activeElement`
- è¿”å›å½“å‰é¡µé¢ä¸­è·å¾—ç„¦ç‚¹çš„å…ƒç´ ï¼Œè¯¥å±æ€§æ˜¯åªè¯»çš„ã€‚
- é¡µé¢åŠ è½½ä¸­ï¼Œ`document.activeElement` ä¸º `null`ã€‚
- é¡µé¢åˆšåˆšåŠ è½½å®Œæˆï¼Œ`document.activeElement` ä¸º `body` å…ƒç´ çš„å¼•ç”¨ã€‚
- ä¸æ”¯æŒ IEã€‚

### 4.2 è®¾ç½®ç„¦ç‚¹
#### 4.2.1 tab é”®
ä½¿ç”¨ `tab` é”®æ¥æ ¹æ® `tabindex` çš„å®šä¹‰æ¥åˆ‡æ¢ç„¦ç‚¹

#### 4.2.2 focus()
```js
document.getElementById("id").focus();
document.getElementById("id").focus({preventScroll:false});
```

- `preventScroll` é»˜è®¤ä¸º `false`ï¼Œè¡¨ç¤ºå½“è§¦å‘æ—¶ï¼Œæµè§ˆå™¨ä¼šå°†å…ƒç´ æ»šåŠ¨åˆ°è§†å›¾ä¸­ã€‚
- `preventScroll` ä¸º `true`ï¼Œåˆ™ä¸å‘ç”Ÿæ»šåŠ¨ã€‚
- éè¡¨å•å…ƒç´ ï¼Œé¡»è®¾ç½® `tanindex="-1"`ã€‚

#### 4.2.3 autofocus
- è¯¥å±æ€§ä¼šä½¿å…ƒç´ åœ¨é¡µé¢åŠ è½½æ—¶ä¼šè‡ªåŠ¨è·å¾—ç„¦ç‚¹ï¼Œé™¤éç”¨æˆ·è¦†ç›–å®ƒã€‚
- å¦‚æœè®¾ç½®å¤šä¸ªï¼Œåˆ™ä¼šå°†ç¬¬ä¸€ä¸ªæ‹¥æœ‰è¯¥å±æ€§çš„å…ƒç´ è®¾ä¸ºåˆå§‹ç„¦ç‚¹ã€‚
- è¯¥å±æ€§åªèƒ½ç”¨äºè¡¨å•å…ƒç´ ã€‚
```html
<select id="mySelect" autofocus>
  <option>Option 1</option>
  <option>Option 2</option>
</select>
```

```js
// è¿”å›ä¸€ä¸ª Boolean
// Check if the autofocus attribute on the <select>
var hasAutofocus = document.getElementById('mySelect').autofocus;
```

### 4.3 åˆ¤æ–­ç„¦ç‚¹ `hasFocus()`
å¦‚æœå½“å‰é¡µé¢çš„æ´»åŠ¨å…ƒç´ è·å¾—äº†ç„¦ç‚¹ï¼Œ`Document.hasFocus()` è¿”å› `true`ï¼Œå¦åˆ™ä¸º `false`ã€‚å¯ä»¥ç”¨æ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æ­£åœ¨ä¸è¯¥é¡µé¢è¿›è¡Œäº¤äº’ã€‚

### 4.4 å–æ¶ˆç„¦ç‚¹
```js
document.getElementById("id").blur();
```
`blur()` ä¼šå°†ç„¦ç‚¹ä»å…ƒç´ ä¸­ç§»èµ°ï¼Œå¹¶ä¸æ˜¯è½¬ç§»åˆ°å…¶ä»–ç‰¹å®šå…ƒç´ ä¸Šã€‚

### 4.5 ç„¦ç‚¹äº‹ä»¶
```js
element.onfocus = function(){}
element.onblur = function(){}
element.onfocusin = function(){}
element.onfocusout = function(){}

element.addEventListener("focus", function(){})
element.addEventListener("blur", function(){})
element.addEventListener("focusin", function(){})
element.addEventListener("focusout", function(){})
```
- `focus` ï¼šåœ¨å…ƒç´ è·å–ç„¦ç‚¹æ—¶è§¦å‘ï¼Œä¸æ”¯æŒå†’æ³¡
- `focusin` ï¼šåœ¨å…ƒç´ è·å–ç„¦ç‚¹æ—¶è§¦å‘ï¼Œæ”¯æŒå†’æ³¡
- `blur` ï¼šåœ¨å…ƒç´ å¤±å»ç„¦ç‚¹æ—¶è§¦å‘ï¼Œä¸æ”¯æŒå†’æ³¡
- `focusout` ï¼šåœ¨å…ƒç´ å¤±å»ç„¦ç‚¹æ—¶è§¦å‘ï¼Œæ”¯æŒå†’æ³¡


## 5 å è®°
**æ„Ÿè°¢æ”¯æŒã€‚**

**è‹¥ä¸è¶³ä¹‹å¤„ï¼Œæ¬¢è¿å¤§å®¶æŒ‡å‡ºï¼Œå…±å‹‰ã€‚**

**å¦‚æœè§‰å¾—ä¸é”™ï¼Œè®°å¾— ç‚¹èµï¼Œè°¢è°¢å¤§å®¶ ÊšğŸ’–É**

**æ¬¢è¿å…³æ³¨ã€‚** 
- [GitHub](https://github.com/xrkffgg) 
- [æ˜ é‡‘](https://juejin.im/user/59c369496fb9a00a4843a3e2) 
- [ç®€ ä¹¦](https://www.jianshu.com/u/4ca4daac5890)

### 5.1 åŸæ–‡åœ°å€

[https://xrkffgg.github.io/Knotes/blog/14.html](https://xrkffgg.github.io/Knotes/blog/14.html)