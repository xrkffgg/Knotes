# 16. æˆ‘æ˜¯å¦‚ä½•åœ¨ GitHub ä¸Šæäº¤ PR çš„

GitHub å¤§å®¶éƒ½çŸ¥é“ï¼Œå¾ˆå¤šå…¬å¸çš„å¼€æºé¡¹ç›®éƒ½ä¼šæ”¾åœ¨è¿™ä¸ªåœ°æ–¹ã€‚

çœ‹åˆ°é‚£äº›å¤§ç‰›çš„ä»£ç ï¼Œä½ æ˜¯å¦ä¹Ÿæƒ³è¿‡ï¼Ÿ

- æˆ‘èƒ½ä¸èƒ½å­¦ä¹ ä»–ä»¬
- æˆ‘èƒ½ä¸èƒ½æäº¤ä¸€äº›è‡ªå·±çš„ä»£ç 
- æˆ‘çš„ä»£ç èƒ½ä¸èƒ½æ»¡è¶³è¦æ±‚
- æˆ‘èƒ½ä¸èƒ½å¾—åˆ°ä»–ä»¬çš„è®¤å¯

æœ¬ç¯‡å°†åˆ†äº«è¿™æ®µæ—¶é—´è‡ªå·±æäº¤ PR çš„ä¸€äº›ç»éªŒï¼Œä¹Ÿæ˜¯è®°å½•è‡ªå·±è¸©è¿‡çš„å‘ã€‚
![](https://github.com/xrkffgg/Kimg/blob/master/blog/16/16-1.png?raw=true)

> é»˜è®¸é˜…è¯»äººç¾¤äº†è§£ GitHub ï¼Œäº†è§£åŸºæœ¬ git å‘½ä»¤ã€‚

è¿™é‡Œä»¥ [ant-design][1] ä¸ºä¾‹ã€‚

## 1. å‡†å¤‡
### 1.1 Fork é¡¹ç›®
![](https://github.com/xrkffgg/Kimg/blob/master/blog/16/16-2.png?raw=true)
ç‚¹å‡» Fork åï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä»¥è‡ªå·±åç§°å‘½åçš„é¡¹ç›®ï¼Œå¦‚å›¾ï¼š
![](https://github.com/xrkffgg/Kimg/blob/master/blog/16/16-4.png?raw=true)
å› ä¸ºæˆ‘è¿™ä¸ªæ˜¯å¾ˆæ—©ä¹‹å‰çš„ï¼Œæ‰€ä»¥å¯ä»¥çœ‹åˆ°æˆ‘é¡¹ç›®çš„ master å·²ç»æ‹‰ä¸‹åŸé¡¹ç›®çš„ master 152ä¸ª commits äº†ã€‚ä¸ç”¨æ‹…å¿ƒï¼Œåé¢ä¼šæ•™ä½ æ€ä¹ˆå¤„ç†ã€‚

### 1.2 Clone åˆ°æœ¬åœ°
![](https://github.com/xrkffgg/Kimg/blob/master/blog/16/16-3.png?raw=true)
```bash
# åœ¨ä½ æƒ³å­˜æ”¾é¡¹ç›®çš„æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œ
git clone https://github.com/xrkffgg/ant-design.git

cd ant-design
```

### 1.3 è®¾ç½® remote
> å¦‚æœä½ è¿™æ˜¯ä¸€æ¬¡æ€§ï¼Œå¹¶ä¸”å¾ˆå¿«å°±æäº¤äº†ï¼Œå¯ä»¥å¿½ç•¥æ­¤æ­¥ï¼Œä½†ä¸å»ºè®®ã€‚
- æ·»åŠ 
```bash
git remote add ant https://github.com/ant-design/ant-design.git
```
- æŸ¥çœ‹

å¦‚æœæ“ä½œæ­£ç¡®ï¼Œæ‰§è¡Œ `git remote -v`ï¼Œä½ å°†çœ‹åˆ°

```bash
ant	https://github.com/ant-design/ant-design.git (fetch)
ant	https://github.com/ant-design/ant-design.git (push)
origin	https://github.com/xrkffgg/ant-design.git (fetch)
origin	https://github.com/xrkffgg/ant-design.git (push)
```

### 1.4 å®‰è£…ä¾èµ–
```bash
yarn 
# or
npm i 
```
### 1.5 å¯åŠ¨é¡¹ç›®
 æœ‰çš„é¡¹ç›®å‘½ä»¤ä¸ä¸€å®šæ˜¯ `start` ï¼Œå…·ä½“å¯ä»¥å» `package.json` ä¸­æŸ¥çœ‹ã€‚
```bash
yarn start
# or
npm run start
```
## 2. å¼€å‘
è¿™é‡Œå°±æ˜¯å°½æƒ…çš„æ¥ Codingã€‚

å¾ˆå¤šé¡¹ç›®éƒ½æœ‰ä¸€äº›å¼€å‘è§„èŒƒï¼Œå»ºè®®å¼€å‘å‰å¯ä»¥å»é˜…è¯»ä»¥ä¸‹ï¼Œæ›´è§„èŒƒçš„ä»£ç æœ‰åŠ©äº PR çš„é€šè¿‡ã€‚

åŒæ—¶åœ¨å¼€å‘å®Œæˆåï¼Œå»ºè®®è¿è¡Œ é¡¹ç›®ä¸­çš„ test æ¥æ£€æŸ¥æ˜¯å¦æ»¡è¶³è¦æ±‚ï¼ˆé¿å… PR ä¸­ test å¤±è´¥ï¼‰

### 2.1 æäº¤
è¿™é‡Œåˆ—å‡ºå‡ ä¸ªè‡ªå·±çš„é£æ ¼ã€‚
- å…ˆæ–°å»ºè¿œç¨‹ï¼Œå†ç›´æ¥æäº¤
> GitHub æ–°å»ºåˆ†æ”¯çš„æ“ä½œä¸ºï¼šåœ¨æŸä¸ªåˆ†æ”¯ä¸‹ï¼Œç‚¹å‡» Branchï¼Œè¾“å…¥ä½ æƒ³æ–°å»ºçš„åç§°ï¼Œæ¯”å¦‚ testï¼Œä¹‹åä¼šè‡ªåŠ¨ä»¥ä½ æ‰€åœ¨åˆ†æ”¯ä¸ºåŸºå‡†æ–°å»ºåˆ†æ”¯ã€‚

æœ¬åœ°åˆ†æ”¯ç›´æ¥ä½¿ç”¨ test åˆ†æ”¯å¼€å‘ï¼Œè¿™æ ·é¿å… master è¢«æ±¡æŸ“ã€‚

- æœ¬åœ°å¼€å‘å®Œæˆï¼Œæ¨é€åˆ°è¿œç«¯å…¶ä»–åˆ†æ”¯
```bash
git add xx
git commit ""
git push origin master:test
```

è¿™æ ·ä¼šå¯¼è‡´è‡ªå·±çš„æœ¬åœ° master å¤šäº† commit ã€‚

add commit çš„æ“ä½œå»ºè®®ä½¿ç”¨å·¥å…·ï¼ˆIDE é›†æˆæˆ–æ’ä»¶ï¼‰æ¥æ‰§è¡Œï¼Œè¿™æ ·å¯ä»¥æ£€æŸ¥ä¸€ä¸‹æäº¤çš„ä»£ç ã€‚

### 2.2 æäº¤è§„èŒƒ
commit ä¿¡æ¯ä¸€å®šè¦å†™çš„è§„èŒƒã€‚å¯å‚è€ƒ [commit è§„èŒƒ][2]

## 3. PR 
### 3.1 æ–°å»º
å½“ä½ æäº¤åˆ°è¿œç¨‹æ—¶ï¼Œç‚¹å¼€ä½ çš„ é¡¹ç›®ä¸»é¡µï¼Œä¼šè‡ªåŠ¨æ˜¾ç¤ºå‡ºä¸€ä¸ª Pull Request çš„æŒ‰é’®ã€‚

å¦‚æœç”±äºç½‘ç»œåŸå› æ²¡åˆ·æ–°å‡ºæ¥ï¼Œå¯è‡ªå·±ç›´æ¥ç‚¹å‡» åˆ†æ”¯æ—çš„ `New pull request`ï¼Œæˆ–å»æºé¡¹ç›®æ–°å»º PRã€‚
### 3.2 å¡«å†™
æ¯ä¸ªé¡¹ç›®éƒ½ä¼šå¯¹è‡ªå·±çš„ PRï¼Œæœ‰ä¸€å®šçš„è¦æ±‚ï¼Œè¯·ä»”ç»†é˜…è¯»è§„èŒƒå¡«å†™ã€‚
### 3.3 åç»­
å½“ä½ åšå®Œè¿™äº›æ“ä½œåï¼Œå°±å¯ä»¥ç­‰ç€é¡¹ç›®ç»´æŠ¤äººå‘˜æ¥è¿›è¡Œä»£ç å®¡æ ¸å’Œ PR æ“ä½œå•¦ã€‚

> å¦‚æœ PR merge åï¼Œä¼šç»™å‡ºä¸€ä¸ª åˆ é™¤ä½ é¡¹ç›®ä¸­åˆ†æ”¯çš„æ“ä½œï¼Œå¯ç›´æ¥ç‚¹å‡»ã€‚

## 4. æƒ…æ™¯
è¿™é‡Œåˆ—å‡ºä¸€äº›æˆ‘é‡åˆ°çš„æƒ…æ™¯å’Œè§£å†³åŠæ³•ã€‚
### 4.1 clone æŒ‡å®šåˆ†æ”¯
```bash
git clone - b v1.0 http://xxx.git
```
### 4.2 æ›´æ–° fork å·¥ç¨‹
```bash
# 1. æ·»åŠ æºåˆ†æ”¯
git remote add xxx git@github.com:author/repos.git

git remote -v æŸ¥çœ‹

# 2. fetch æºä»“åº“ä»£ç çš„æœ€æ–°ç‰ˆæœ¬åˆ°æœ¬åœ°
git fetch xxx

# 3. åˆå¹¶ä¸¤ä¸ªç‰ˆæœ¬çš„ä»£ç 
git merge xxx/master
# or
git rebase xxx/master

# 4. æ›´æ–°åˆ°GitHubçš„forkä¸Š
git push origin master
```
### 4.3 æ¢å¤è¿œç«¯ commit 

```bash
# 1. æŸ¥çœ‹ commit å†å²
git reflog

# 2. æ¢å¤åˆ°æŒ‡å®š commit 
git reset --soft HEAD~1

# 3. commit å¤„ç†

# 4. push è¿œç«¯
git push origin master --force
```

### 4.4 PR rebase

```bash
# 1. master æ›´æ–°åˆ°æœ€æ–°

# 2. rebase
git rebase master

# 3. push
git push --force
```

### 4.5 è¿œç¨‹æ–°å»ºåˆ†æ”¯å¦‚ä½•å¼€å‘
```bash
git fetch
git checkout -t origin/xxx
```

## 5 å è®°
**æ„Ÿè°¢æ”¯æŒã€‚**

**è‹¥ä¸è¶³ä¹‹å¤„ï¼Œæ¬¢è¿å¤§å®¶æŒ‡å‡ºï¼Œå…±å‹‰ã€‚**

**å¦‚æœè§‰å¾—ä¸é”™ï¼Œè®°å¾— ç‚¹èµï¼Œè°¢è°¢å¤§å®¶ ÊšğŸ’–É**

**æ¬¢è¿å…³æ³¨ã€‚** 
- [GitHub](https://github.com/xrkffgg) 
- [æ˜ é‡‘](https://juejin.im/user/59c369496fb9a00a4843a3e2) 
- [ç®€ ä¹¦](https://www.jianshu.com/u/4ca4daac5890)

### 5.1 åŸæ–‡åœ°å€

[https://xrkffgg.github.io/Knotes/blog/16.html](https://xrkffgg.github.io/Knotes/blog/16.html)


[1]: https://ant.design/index-cn
[2]:https://xrkffgg.github.io/Knotes/standard/#_1-2-git-commit-%E8%A7%84%E8%8C%83