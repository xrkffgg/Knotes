---
sidebarDepth: 2
---
# ğŸ­ ä½ ä¸çŸ¥é“çš„JavaScript
## 1 è¯æ³•ä½œç”¨åŸŸ
### 1.1 è¯æ³•é˜¶æ®µ
#### æŸ¥æ‰¾
:::tip
- é®è”½æ•ˆåº”ï¼šä½œç”¨åŸŸæŸ¥æ‰¾ä¼šåœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ ‡è¯†ç¬¦æ—¶åœæ­¢ï¼ˆå†…éƒ¨çš„æ ‡è¯†ç¬¦â€œé®è”½â€äº†å¤–éƒ¨çš„æ ‡è¯†ç¬¦ï¼‰ã€‚
:::
ä½œç”¨åŸŸæŸ¥æ‰¾å§‹ç»ˆä»è¿è¡Œæ—¶æ‰€å¤„çš„æœ€å†…éƒ¨ä½œç”¨åŸŸå¼€å§‹ï¼Œé€çº§å‘å¤–æˆ–è€…è¯´å‘ä¸Šè¿›è¡Œï¼Œç›´åˆ°é‡è§ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ ‡è¯†ç¬¦ä¸ºæ­¢ã€‚
### 1.2 æ¬ºéª—è¯­æ³•
#### `eval`
> `JavaScript` ä¸­çš„ `eval(...)` å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºå‚æ•°ï¼Œå¹¶å°†å…¶ä¸­çš„å†…å®¹è§†ä¸ºå¥½åƒåœ¨ä¹¦å†™æ—¶å°±å­˜åœ¨äºç¨‹åºä¸­è¿™ä¸ªä½ç½®çš„ä»£ç ã€‚

```js
function foo(str, a){
  eval(str);  // æ¬ºéª—ï¼
  console.log(a, b);
}

var b = 2;

foo( 'var b = 3;', 1);  // 1,3
```
- `eval(...)` è°ƒç”¨ä¸­çš„ 'var b = 3;' è¿™æ®µä»£ç ä¼šè¢«å½“ä½œæœ¬æ¥å°±åœ¨é‚£é‡Œä¸€æ ·æ¥å¤„ç†ã€‚
- è¢«ç”¨æ¥æ‰§è¡ŒåŠ¨æ€åˆ›å»ºçš„ä»£ç 

:::tip
åœ¨ä¸¥æ ¼æ¨¡å¼çš„ç¨‹åºä¸­ï¼Œ`eval(...)` åœ¨è¿è¡Œæ—¶æœ‰å…¶è‡ªå·±çš„è¯­æ³•ä½œç”¨åŸŸï¼Œæ„å‘³ç€å…¶ä¸­çš„å£°æ˜æ— ç¢æ³•ä¿®æ”¹æ‰€åœ¨çš„ä½œç”¨åŸŸã€‚
:::

```js
function foo(str){
  "use strict";
  eval(str);
  console.log(a); // a is not defined
}

foo('var a = 2');
```

:::warning ä¸æå€¡ä½¿ç”¨
- `setTimeout(...)` å’Œ `setInterval(...)` çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²çš„å†…å®¹å¯ä»¥è¢«è§£é‡Šä¸ºä¸€æ®µåŠ¨æ€ç”Ÿæˆçš„å‡½æ•°ä»£ç ã€‚
- `new Function(...)` å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°å¯ä»¥æ¥å—ä»£ç å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºåŠ¨æ€ç”Ÿæˆçš„å‡½æ•°ï¼ˆå‰é¢çš„å‚æ•°æ˜¯è¿™ä¸ªæ–°ç”Ÿæˆçš„å‡½æ•°çš„å½¢å‚ï¼‰ã€‚
:::

#### `with`

`with` é€šå¸¸è¢«å½“åšé‡å¤å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ä¸­å¤šä¸ªå±æ€§çš„å¿«æ·æ–¹å¼ï¼Œå¯ä»¥ä¸éœ€è¦é‡å¤å¼•ç”¨å¯¹è±¡æœ¬èº«ã€‚

```js
var obj = {
  a: 1,
  b: 2,
  c: 3
};

// å•è°ƒä¹å‘³çš„èµ‹å€¼
obj.a = 2;
obj.b = 3;
obj.c = 4;

// ç®€å•å¿«æ·èµ‹å€¼
with (obj) {
  a = 3;
  b = 4;
  c = 5;
}
```

:::warning æ³¨æ„

`with` å¯ä»¥å°†ä¸€ä¸ªæ²¡æœ‰æˆ–æœ‰å¤šä¸ªå±æ€§çš„å¯¹è±¡å¤„ç†ä¸ºä¸€ä¸ªå®Œå…¨éš”ç¦»çš„è¯­æ³•ä½œç”¨åŸŸã€‚



`eval(...)` å¦‚æœæ¥å—äº†å«æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå£°æ˜çš„ä»£ç ï¼Œå°±ä¼šä¿®æ”¹å…¶æ‰€å¤„çš„è¯­æ³•ä½œç”¨åŸŸï¼Œ`with` å£°æ˜ä¼šæ ¹æ®ä½ ä¼ é€’ç»™å®ƒçš„å¯¹è±¡å‡­ç©ºåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„è¯­æ³•ä½œç”¨åŸŸã€‚

:::

:::danger ç¦æ­¢

ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼š`with` è¢«å®Œå…¨ç¦æ­¢ï¼Œè€Œåœ¨ä¿ç•™æ ¸å¿ƒåŠŸèƒ½çš„å‰æä¸‹ï¼Œé—´æ¥æˆ–è€…éå®‰å…¨åœ°ä½¿ç”¨ `eval` ä¹Ÿè¢«ç¦æ­¢äº†ã€‚



ä¸¥é‡å½±å“æ€§èƒ½ï¼Œå¼•æ“æ— æ³•åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚

:::

## 2 å‡½æ•°ä½œç”¨åŸŸå’Œå—ä½œç”¨åŸŸ

### 2.1 è§„é¿å†²çª

- å…¨å±€å‘½åç©ºé—´

```js
var MyReallyCoolLibrary = {
  awesome: 'stuff',
  doSomething: function() {
    
  },
  doAnotherThing: function() {
    
  }
};
```

- æ¨¡æ¿ç®¡ç†

### 2.2 å‡½æ•°ä½œç”¨åŸŸ

- å‡½æ•°è¡¨è¾¾å¼

```js
var a = 2;
function foo() {
  var a = 3;
  console.log(a);  // 3
}
foo();
console.log(a);  // 2
```

```js
var a = 2;
(function foo() {
  var a = 3;
  console.log(a);  // 3
})();
console.log(a);  // 2
```

å¦‚æœ `function` æ˜¯å£°æ˜ä¸­çš„ç¬¬ä¸€ä¸ªè¯ï¼Œé‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜ï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ã€‚

> å§‹ç»ˆç»™å‡½æ•°è¡¨è¾¾å¼å‘½åæ˜¯ä¸€ä¸ªæœ€ä½³å®è·µã€‚

> IIFEï¼ˆImmediately Invoked Function Expressionï¼‰ï¼šç«‹å³æ‰§è¡Œå‡½æ•°ã€‚

### 2.3 å—ä½œç”¨åŸŸ

å¼€å‘è€…éœ€è¦æ£€æŸ¥è‡ªå·±çš„ä»£ç ï¼Œé¿å…åœ¨ä½œç”¨åŸŸèŒƒå›´å¤–æ„å¤–åœ°ä½¿ç”¨ï¼ˆæˆ–å¤ç”¨ï¼‰æŸäº›å˜é‡ã€‚

- `with`
- `try/catch`

```js
try {
  undefined();	// æ‰§è¡Œä¸€ä¸ªéæ³•æ“ä½œ
} catch (err) {
  console.log(err);	// èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œ
}

console.log(err);	// ReferenceError: err not found
```

- `let`

åœ¨å£°æ˜ä¸­çš„ä»»æ„ä½ç½®éƒ½å¯ä»¥ä½¿ç”¨ { .. } æ‹¬å·æ¥ä¸º `let` åˆ›å»ºä¸€ä¸ªç”¨äºç»‘å®šçš„å—ã€‚

```js
var foo = true;
if(foo){
  {	// <-- æ˜¾å¼çš„å—
    let bar = 1;
  }
}
```

## 3 æå‡

```js
foo();

function foo() {
  console.log(a);	// undefined
  var a = 2;
}
```

- æ¯ä¸ªä½œç”¨åŸŸéƒ½ä¼šè¿›è¡Œæå‡æ“ä½œã€‚
- å‡½æ•°å£°æ˜ä¼šè¢«æå‡ï¼Œå‡½æ•°è¡¨è¾¾å¼ä¸ä¼šè¢«æå‡ã€‚
- å˜é‡å£°æ˜ä¼šè¢«æå‡ï¼Œå˜é‡èµ‹å€¼ä¸ä¼šè¢«æå‡ã€‚

```js
function foo() {
  var a;
  console.log(a);	//undefined
  a = 2;
}

foo();
```

```js
foo();	// ä¸æ˜¯ ReferenceErrorï¼Œè€Œæ˜¯ TypeError!

var foo() = function bar() {
	// ...
};
```

### 3.1 å‡½æ•°ä¼˜å…ˆ

å‡½æ•°ä¼šé¦–å…ˆè¢«æå‡ï¼Œç„¶åæ‰æ˜¯å˜é‡ã€‚

## 4 this è§£æ

### 4.1 ç»‘å®šè§„åˆ™

1. é»˜è®¤ç»‘å®š

```js
function foo() {
  console.log( this.a );
}

var a = 2;

foo(); // 2
```

å½“åœ¨ foo() é‡Œä½¿ç”¨ â€œuse strictâ€ æ—¶ï¼Œå°†ä¼šæ˜¾ç¤º `this is undefined` ã€‚

2. éšå½¢ç»‘å®š

```js
function foo() {
	console.log( this.a );
}

var obj = {
  a: 2;
  foo: foo;
}

obj.boo(); // 2
```

å¯¹è±¡å±æ€§å¼•ç”¨é“¾ä¸­åªæœ‰ä¸Šä¸€å±‚æˆ–è€…è¯´æœ€åä¸€å±‚åœ¨è°ƒç”¨ä½ç½®ä¸­èµ·ä½œç”¨ã€‚

- éšå¼ä¸¢å¤±

```js
function foo() {
	console.log(this.a)
}

var obj = {
  a: 2;
  foo: foo;
}

var bar = obj.foo();	// å‡½æ•°åˆ«å

var a = 'global';

bar();	// 'global'
```

å›è°ƒå‡½æ•°ã€ç³»ç»Ÿå‡½æ•° `setTimeout() ` ä¹Ÿä¼šé€ æˆè¿™ç§ç°è±¡ã€‚

3. æ˜¾ç¤ºç»‘å®š